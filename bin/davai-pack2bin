#!/usr/bin/env python3
# -*- coding:Utf-8 -*-

import os
import sys
import argparse

# Automatically set the python path for davai_cmd
repo_path = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
sys.path.insert(0, os.path.join(repo_path, 'src'))
from davai_env.experiment import ThisXP


def main(cleanpack=False,
         drymode=False):
    this_xp = ThisXP()
    this_xp.gmkpack_launch_build(drymode=drymode,
                                 cleanpack=cleanpack)


if __name__ == "__main__":

    parser = argparse.ArgumentParser(description='Build executables. To be executed from the XP directory !')
    parser.add_argument('-c', '--cleanpack',
                        action='store_true',
                        help="Clean pack before pack2bin.")
    parser.add_argument('--drymode',
                        action='store_true',
                        help="Dry mode: print commands to be executed, but do not run them")
    args = parser.parse_args()

    main(cleanpack=args.cleanpack,
         drymode=args.drymode)
